# Repository Cleanup Guide

This document outlines redundant, unused, and unnecessary files in the dbt project that should be cleaned up.

## Files Found for Cleanup

### 1. âŒ Compiled Artifacts (Should NOT be in Git)

**Location:** `target/` directory
**Size:** ~3.6 MB
**Files:**
- `target/manifest.json` - Compiled metadata
- `target/graph.gpickle` - Dependency graph
- `target/compiled/` - Compiled SQL models
- `target/run/` - Execution results
- All other files in `target/`

**Why Remove:** Auto-generated on every `dbt compile/run`. Should only exist locally.

**Status:** Currently tracked in Git âŒ

**Action:** Add to `.gitignore`:
```
target/
```

---

### 2. âŒ Log Files (Should NOT be in Git)

**Location:** `logs/` directory
**Size:** ~21 MB
**Files:**
- `logs/dbt.log` (197 KB)
- `logs/dbt.log.1` (10 MB)
- `logs/dbt.log.2` (10 MB)

**Why Remove:** Auto-generated on every run. Shouldn't be version controlled.

**Status:** Currently tracked in Git âŒ

**Action:** Add to `.gitignore`:
```
logs/
```

---

### 3. âŒ Package Dependencies (Should NOT be in Git)

**Location:** `dbt_packages/` directory
**Size:** ~4 KB
**Files:** dbt_utils package and dependencies

**Why Remove:** Generated by `dbt deps`. Should be installed fresh from `packages.yml`.

**Status:** Currently tracked in Git âŒ

**Action:** Add to `.gitignore`:
```
dbt_packages/
```

---

### 4. âš ï¸ Redundant Python Scripts

**Location:** `benchmark/`

#### Option A: Keep Both (Current State) âœ“
- `benchmark/compare.py` (95 lines) - Basic comparison
- `benchmark/compare_kpis.py` (192 lines) - Advanced KPI comparison
- `benchmark/gen_report_a.py` - Pipeline A
- `benchmark/gen_report_b.py` - Pipeline B
- `benchmark/gen_report_c.py` - Pipeline C
- `benchmark/run_all_benchmarks.py` - Master script

#### Option B: Consolidate (Recommended) ðŸŽ¯
```bash
# Remove:
rm benchmark/compare.py                # Use compare_kpis.py instead
rm benchmark/gen_report_a.py
rm benchmark/gen_report_b.py
rm benchmark/gen_report_c.py

# Keep:
benchmark/compare_kpis.py             # More comprehensive
benchmark/gen_report.py --pipeline a|b|c  # Parameterized (create new)
benchmark/run_all_benchmarks.py
```

**Recommendation:** Keep as-is for now (clear separation helps understanding).

---

### 5. âŒ System Artifacts

**Location:** Project root
**File:** `nul` (0 bytes)

**Why Remove:** Windows system artifact, shouldn't be in repo.

**Status:** Untracked âŒ (but exists in working directory)

**Action:**
```bash
rm nul
```

---

### 6. âš ï¸ Local Configuration File

**Location:** `.claude/settings.local.json`
**Size:** Minimal
**Status:** Currently tracked (Modified) âŒ

**Why Remove:** Local settings shouldn't be version controlled.

**Action:** Add to `.gitignore`:
```
.claude/settings.local.json
```

---

### 7. âš ï¸ Platform-Specific Scripts

**Location:** Project root
**File:** `generate_report.bat` (Untracked)

**Why Remove:** Windows-only script. Use cross-platform Python/Artemis instead.

**Status:** Untracked (good)

**Action:** Consider removing or replacing with Python script.

---

### 8. âš ï¸ Deleted Documentation

**In Git History (deleted in recent commits):**
- `ARTEMIS_COMMANDS.md`
- `BENCHMARKING_GUIDE.md`
- `BENCHMARK_README.md`
- `IMPLEMENTATION_SUMMARY.md`
- `KPI_SYSTEM_EXPLAINED.md`
- `PIPELINE_FLOW.md`
- `QUICK_REFERENCE.md`
- `READY_FOR_ARTEMIS.md`

**Status:** Tracked in Git history, deleted from working directory âœ“

**Note:** Not actionable (already removed). They're in git history but don't clutter current repo.

---

### 9. âš ï¸ Duplicate Benchmark Models (Pipeline B)

**Location:** `models/pipeline_b/marts/`
**Files:**
- `report_trading_performance.sql` - Simple pass-through
- `report_trade_performance.sql` - More comprehensive

**Why Possibly Redundant:** Both named similarly, similar purpose.

**Status:** One tracked (trading_performance), one untracked (trade_performance)

**Action:** Review and decide if both needed or if one should be removed.

---

### 10. âš ï¸ Incomplete Pipeline A Tracking

**Location:** `models/pipeline_a/intermediate/`

**Issue:** Directory exists with files but not properly tracked in Git.

**Status:** Mixed (some files untracked)

**Action:** Verify if Pipeline A intermediate models should be tracked.

---

## Cleanup Checklist

### Immediate Cleanup (Safe & Recommended)

- [ ] Add `target/` to `.gitignore`
- [ ] Add `logs/` to `.gitignore`
- [ ] Add `dbt_packages/` to `.gitignore`
- [ ] Add `.claude/settings.local.json` to `.gitignore`
- [ ] Delete `nul` file
- [ ] Run `git rm -r --cached target/ logs/ dbt_packages/` to remove from git history

### Review & Decide

- [ ] Review Pipeline B duplicate reports (trading_performance vs trade_performance)
- [ ] Verify Pipeline A intermediate models should be tracked
- [ ] Decide if `generate_report.bat` should be removed

### Nice-to-Have (Could consolidate)

- [ ] Consider parameterizing benchmark report generators
- [ ] Review if `compare.py` and `compare_kpis.py` both needed

---

## Commands to Execute Cleanup

### Step 1: Create .gitignore Updates

```bash
# Add to .gitignore
cat >> .gitignore << 'EOF'
target/
logs/
dbt_packages/
.claude/settings.local.json
nul
EOF
```

### Step 2: Remove from Git History

```bash
git rm -r --cached target/
git rm -r --cached logs/
git rm -r --cached dbt_packages/
git rm -r --cached .claude/settings.local.json
git commit -m "chore: remove build artifacts and logs from git tracking"
```

### Step 3: Delete Local Files

```bash
rm -f nul
rm -f generate_report.bat  # Optional
```

### Step 4: Verify

```bash
git status  # Should show clean working directory
```

---

## Before/After Comparison

### Before Cleanup
- Repository Size: ~36 MB
- Tracked Artifacts: target/, logs/, dbt_packages/
- Unnecessary Files: nul, platform-specific scripts

### After Cleanup
- Repository Size: ~12 MB (66% reduction!)
- Only source code & configuration tracked
- Cleaner Git history

---

## Additional Notes

âœ“ The new benchmarking scripts (`gen_report_a/b/c.py`) are good - keep them
âœ“ The `README.md` is up-to-date and sufficient
âœ“ The `BENCHMARKING_SETUP.md` documents the current setup well
âœ“ Benchmark comparison tools (`compare_kpis.py`) are useful - keep them

---

## FAQ

**Q: Will removing target/ break anything?**
A: No. The `target/` directory is auto-generated. Simply run `dbt compile` to regenerate.

**Q: Should I remove logs/?**
A: Yes. These files are auto-generated. Keep only recent logs if needed for debugging.

**Q: Will git rm --cached lose data?**
A: No. `--cached` only removes from Git tracking, not from your disk. Files stay locally.

**Q: Can I undo these changes?**
A: Yes. Git tracks everything. You can revert any commit with `git revert`.

